{"version":3,"sources":["router/index.js","layout/nav/nav.js","layout/index.js","App.js","serviceWorker.js","store/reducers/module/user.js","store/types.js","store/reducers/module/articles.js","store/reducers/index.js","store/configureStore.js","index.js","utils/utils.js","page/middle/middle.js","plugins/heart.js"],"names":["loadingComponent","error","pastDelay","config","name","path","exact","component","Loadable","loader","loading","delay","Header","Layout","AppHeader","props","state","isMobile","visible","placement","current","menuCurrent","login","register","navPath","code","isLoading","navMenuArr","title","isMobileOrPc","this","setState","location","pathname","item","className","type","justify","overlayClassName","to","src","alt","map","index","key","onClick","toNavChange","bind","Component","withRouter","Footer","Layouts","isIndexPage","children","App","history","routers","r","Boolean","window","hostname","match","initState","userInfo","avatar","create_time","email","id","img_url","introduce","password","phone","update_time","__v","_id","message","refresh","user","action","payload","data","articlesList","total","articles","length","list","count","rootReducer","combineReducers","router","connectRouter","createBrowserHistory","store","preloadedState","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","createRootReducer","applyMiddleware","routerMiddleware","configureStore","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","test","userAgent","getQueryStringByName","result","search","RegExp","Middle","Vector3","Matrix44","create","x","y","z","dot","v0","v1","cross","v","normalize","l","Math","sqrt","arrayForm","array","Float32Array","createIdentity","loadProjection","m","aspect","vdeg","near","far","h","tan","PI","w","loadLookAt","vpos","vlook","vup","frontv","sidev","topv","gl","timeInfo","start","prev","delta","elapsed","renderSpec","width","height","halfWidth","halfHeight","halfArray","compileShader","shtype","shsrc","retsh","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","errlog","getShaderInfoLog","deleteShader","vtxsrc","frgsrc","uniformlist","attrlist","vsh","VERTEX_SHADER","fsh","FRAGMENT_SHADER","prog","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","uniforms","i","getUniformLocation","attributes","attr","getAttribLocation","homeShader","useProgram","enableVertexAttribArray","unhomeShader","disableVertexAttribArray","setSize","floor","projection","angle","nearfar","matrix","camera","position","lookat","up","dof","pointFlower","sceneStandBy","BlossomParticle","velocity","Array","rotation","euler","size","alpha","zkey","createEffectProgram","exunifs","exattrs","ret","unifs","concat","attrs","program","dataArray","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","homeEffect","fxobj","srctex","uniform3fv","uResolution","uniform2fv","uDelta","dtxArray","uniform1i","uSrc","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texture","drawEffect","vertexAttribPointer","aPosition","FLOAT","drawArrays","TRIANGLE_STRIP","unhomeEffect","prototype","setVelocity","vx","vy","vz","setRotation","rx","ry","rz","setPosition","nx","ny","nz","setEulerAngles","s","update","dt","et","effectLib","initScene","area","fader","PI2","tmpv3","tmpv","symmetryrand","random","numFlowers","tmpprtcl","particles","initPointFlowers","atan2","renderScene","enable","DEPTH_TEST","bindFramebuffer","FRAMEBUFFER","mainRT","frameBuffer","viewport","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","disable","sceneBg","uniform2f","uTimes","repeatPos","prt","cmp","limit","abs","repeatEuler","prtcl","sort","p0","p1","ipos","positionArrayOffset","ieuler","eulerArrayOffset","imisc","miscArrayOffset","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","uniformMatrix4fv","uProjection","uModelview","uDOF","uFade","DYNAMIC_DRAW","BYTES_PER_ELEMENT","aEuler","aMisc","zpos","offset","uOffset","POINT","renderPointFlowers","bindRT","rt","isclear","wHalfRT0","mkBrightBuf","p","wHalfRT1","dirBlur","uniform4f","uBlurDir","finalComp","uBloom","TEXTURE1","renderPostProcess","setViewports","canvas","rtfunc","rtname","rtw","rth","deleteFramebuffer","deleteRenderbuffer","renderBuffer","deleteTexture","deleteRenderTarget","sizeArray","createFramebuffer","createRenderbuffer","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","framebufferTexture2D","COLOR_ATTACHMENT0","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","createRenderTarget","makeCanvasFullScreen","b","body","d","documentElement","fullw","max","clientWidth","scrollWidth","fullh","clientHeight","scrollHeight","getContext","e","alert","addEventListener","cmnvtxsrc","createEffectLib","prm","getParameter","ALIASED_POINT_SIZE_RANGE","pointSize","min","createPointFlowers","Date","animate","curdate","requestAnimationFrame","c","setTimeout","target","rel","href","hearts","gameloop","removeChild","el","splice","scale","style","cssText","color","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","css","createElement","appendChild","createTextNode","ex","styleSheet","getElementsByTagName","old","onclick","event","push","clientX","clientY","createHeart","attachEvent"],"mappings":"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","file":"static/js/main.39c5ff9d.chunk.js","sourcesContent":["import React from 'react';\r\nimport Loadable from 'react-loadable';\r\n\r\nconst loadingComponent = ({ error, pastDelay }) => {\r\n  if (error) {\r\n    return <div>Error!</div>;\r\n  } else if (pastDelay) {\r\n    // return <div>Loading...</div>;\r\n    return <div />;\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\nlet config = [\r\n  // 首页\r\n  {\r\n    name: 'home',\r\n    path: '/',\r\n    exact: true,\r\n    component: Loadable({\r\n      loader: () => import('../page/home/home.js'),\r\n      loading: loadingComponent,\r\n      delay: 300,\r\n    }),\r\n  },\r\n  {\r\n    name: 'classify',\r\n    path: '/classify',\r\n    exact: true,\r\n    component: Loadable({\r\n      loader: () => import('../page/classify/classify.js'),\r\n      loading: loadingComponent,\r\n      delay: 300,\r\n    }),\r\n  },\r\n  // 文章详情\r\n  {\r\n    name: 'articleDetails',\r\n    path: '/articleDetails',\r\n    exact: true,\r\n    component: Loadable({\r\n      loader: () => import('../page/articleDetails/articleDetails.js'),\r\n      loading: loadingComponent,\r\n      delay: 300,\r\n    }),\r\n  },\r\n  // 官网和后台管理系统切换页面\r\n  {\r\n    name: 'middle',\r\n    path: '/middle',\r\n    exact: true,\r\n    component: Loadable({\r\n      loader: () => import('../page/middle/middle.js'),\r\n      loading: loadingComponent,\r\n      delay: 300,\r\n    }),\r\n  },\r\n];\r\n\r\nexport default config;\r\n","import './nav.scss';\r\nimport React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport {\r\n  Layout,\r\n  Row,\r\n  Col,\r\n  Tooltip,\r\n} from 'antd';\r\nimport { isMobileOrPc } from '../../utils/utils';\r\n\r\nconst { Header } = Layout;\r\n\r\nclass AppHeader extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isMobile: false,\r\n      visible: false,\r\n      placement: 'top',\r\n      current: null,\r\n      menuCurrent: '',\r\n      login: false,\r\n      register: false,\r\n      navPath: '/',\r\n      code: '',\r\n      isLoading: false,\r\n      navMenuArr: [\r\n        {\r\n          title: \"首页\",\r\n          path: \"/\",\r\n        },\r\n        {\r\n          title: \"分类\",\r\n          path: \"/classify\"\r\n        }\r\n      ]\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const self = this;\r\n    if (isMobileOrPc()) {\r\n      self.setState({\r\n        isMobile: true\r\n      });\r\n    }\r\n    self.setState({\r\n      navPath: self.props.location.pathname\r\n    });\r\n  }\r\n\r\n  toNavChange(item) {\r\n    this.setState({\r\n      navPath: item.path\r\n    });\r\n  }\r\n  render() {\r\n\r\n    return (\r\n      <Header className=\"nav\">\r\n        <Row className=\"nav-row\" type=\"flex\" justify=\"space-between\">\r\n          {/*<Col xs={24} sm={24} md={10} lg={10} xl={10}>*/}\r\n            <Tooltip title=\"点击可进入过渡页面\" overlayClassName=\"nav-tool\">\r\n              <Link to=\"/middle\" className=\"nav-logo\">\r\n                <img className=\"nav-logo--img\" src=\"https://6672-frist-ixdkl-1300617104.tcb.qcloud.la/blog/www/logo.jpg\" alt=\"Yang Ruirui logo\" />\r\n                <span className=\"nav-logo--name\">Mr.Yang</span>\r\n              </Link>\r\n            </Tooltip>\r\n          {/*</Col>*/}\r\n          {/*<Col xs={0} sm={0} md={14} lg={8} xl={6}>*/}\r\n            <ul className=\"nav-menu\">\r\n              {\r\n                this.state.navMenuArr.map((item, index) =>\r\n                  <li className=\"nav-menu--item\" key={index}>\r\n                    <Link className={this.state.navPath === item.path?'active':''} to={item.path} onClick={this.toNavChange.bind(this,item)}>\r\n                      { item.title }\r\n                    </Link>\r\n                  </li>\r\n                )\r\n              }\r\n            </ul>\r\n          {/*</Col>*/}\r\n        </Row>\r\n      </Header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(AppHeader);\r\n","import './index.scss';\r\nimport './mobile.scss';\r\nimport React, { Component } from 'react';\r\nimport { Layout, BackTop } from 'antd';\r\nimport Nav from './nav/nav';\r\nimport Middle from '../page/middle/middle';\r\n\r\nconst { Footer } = Layout;\r\n\r\nclass Layouts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n    let isIndexPage = false;\r\n    if (this.props.location.pathname === '/middle') {\r\n      isIndexPage = true;\r\n    }\r\n    return (\r\n      <div className=\"Layouts\">\r\n        {!isIndexPage ? (\r\n            <Layout>\r\n              <Nav />\r\n              {this.props.children}\r\n              <Footer className=\"layouts-footer\">\r\n                ©2020<i className=\"icon-aixin layouts-footer--love\"/>Mr.Yang | 黔ICP备20002802号\r\n              </Footer>\r\n              <BackTop />\r\n            </Layout>\r\n        ) : (\r\n          <Middle />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Layouts;\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport { ConnectedRouter } from 'connected-react-router'\r\nimport { Route, Switch } from 'react-router'\r\nimport routers from './router/index.js';\r\nimport Layouts from './layout';\r\n\r\nconst App = ({ history }) => {\r\n  return (\r\n    <ConnectedRouter history={history}>\r\n      <Switch>\r\n        <Layouts>\r\n          {routers.map((r, key) => (\r\n            <Route\r\n              component={r.component}\r\n              exact={!!r.exact}\r\n              key={key}\r\n              path={r.path}\r\n            />\r\n          ))}\r\n        </Layouts>\r\n      </Switch>\r\n    </ConnectedRouter>\r\n  )\r\n};\r\n\r\nApp.propTypes = {\r\n  history: PropTypes.object,\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  /*{\r\n    headers: { 'Service-Worker': 'script' },\r\n  }*/\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import {\r\n  LOGIN_SUCCESS,\r\n  REGISTER_SUCCESS,\r\n  LOGOUT,\r\n  LOGIN_FAILURE,\r\n  REGISTER_FAILURE,\r\n} from '../../types';\r\n\r\n/**\r\n * state\r\n */\r\nconst initState = {\r\n  userInfo: {\r\n    avatar: '',\r\n    create_time: '',\r\n    email: '',\r\n    id: '',\r\n    img_url: '',\r\n    introduce: '',\r\n    name: '',\r\n    password: '',\r\n    phone: '',\r\n    type: '',\r\n    update_time: '',\r\n    __v: 0,\r\n    _id: '',\r\n  },\r\n  message: '',\r\n  refresh: 1,\r\n};\r\n\r\n/**\r\n * reducer\r\n * @param {*} state\r\n * @param {*} action\r\n */\r\nexport function user(state = initState, action) {\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        userInfo: action.payload.data,\r\n        message: action.payload.message,\r\n      };\r\n    case REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        userInfo: '',\r\n        message: action.payload.message,\r\n      };\r\n    case LOGOUT:\r\n      return {\r\n        userInfo: '',\r\n        message: '',\r\n        refresh: 0,\r\n      };\r\n    case LOGIN_FAILURE:\r\n    case REGISTER_FAILURE:\r\n      return {\r\n        ...state,\r\n        userInfo: '',\r\n        message: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","/**\r\n * action type global\r\n */\r\nexport const ACTIVE_NAV = 'ACTIVE_NAV';\r\nexport const CURRENT_ANIMATE = 'CURRENT_ANIMATE';\r\nexport const RECEIVE_NAV = 'RECEIVE_NAV';\r\n\r\n/**\r\n * action type user\r\n */\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\r\nexport const LOGOUT = 'LOGOUT';\r\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\r\nexport const REGISTER_FAILURE = 'REGISTER_FAILURE';\r\n\r\n/**\r\n * action type article\r\n */\r\nexport const SAVE_ARTICLES_LIST = 'SAVE_ARTICLES_LIST';\r\n","import { SAVE_ARTICLES_LIST } from '../../types.js';\r\n\r\n/**\r\n * state\r\n */\r\nconst initState = {\r\n  articlesList: [],\r\n  total: 0,\r\n};\r\n\r\n/**\r\n * reducer\r\n * @param {*} state\r\n * @param {*} action\r\n */\r\nexport function articles(state = initState, action) {\r\n  switch (action.type) {\r\n    case SAVE_ARTICLES_LIST:\r\n      return {\r\n        ...state,\r\n        articlesList: state.articlesList.length\r\n          ? [...state.articlesList, ...action.payload.list]\r\n          : action.payload.list,\r\n        total: action.payload.count,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { connectRouter } from 'connected-react-router';\r\nimport { user } from './module/user';\r\nimport { articles } from './module/articles';\r\n\r\nconst rootReducer = history =>\r\n  combineReducers({\r\n    user,\r\n    articles,\r\n    router: connectRouter(history),\r\n  });\r\n\r\nexport default rootReducer;\r\n","import { createBrowserHistory } from 'history';\r\nimport { applyMiddleware, compose, createStore } from 'redux';\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport createRootReducer from './reducers';\r\n\r\nexport const history = createBrowserHistory();\r\n\r\nexport default function configureStore(preloadedState) {\r\n  const composeEnhancer =\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n  const store = createStore(\r\n    createRootReducer(history),\r\n    preloadedState,\r\n    composeEnhancer(applyMiddleware(routerMiddleware(history))),\r\n  );\r\n\r\n  // Hot reloading\r\n  if (module.hot) {\r\n    // Enable Webpack hot module replacement for reducers\r\n    module.hot.accept('./reducers', () => {\r\n      store.replaceReducer(createRootReducer(history));\r\n    });\r\n  }\r\n\r\n  return store;\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport './plugins/heart';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport configureStore, { history } from './store/configureStore'\r\n\r\nconst store = configureStore();\r\n\r\nconst render = () => {\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <App history={history} />\r\n    </Provider>,\r\n    document.getElementById('root'),\r\n  );\r\n};\r\n\r\nrender();\r\n\r\n// Hot reloading\r\nif (module.hot) {\r\n  // Reload components\r\n  module.hot.accept('./App', () => {\r\n    render()\r\n  })\r\n}\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// fn是我们需要包装的事件回调, delay是时间间隔的阈值\r\n/*export function throttle(fn, delay) {\r\n  // last为上一次触发回调的时间, timer是定时器\r\n  let last = 0,\r\n    timer = null;\r\n  // 将throttle处理结果当作函数返回\r\n\r\n  return function() {\r\n    // 保留调用时的this上下文\r\n    let context = this;\r\n    // 保留调用时传入的参数\r\n    let args = arguments;\r\n    // 记录本次触发回调的时间\r\n    let now = +new Date();\r\n\r\n    // 判断上次触发的时间和本次触发的时间差是否小于时间间隔的阈值\r\n    if (now - last < delay) {\r\n      // 如果时间间隔小于我们设定的时间间隔阈值，则为本次触发操作设立一个新的定时器\r\n      clearTimeout(timer);\r\n      timer = setTimeout(function() {\r\n        last = now;\r\n        fn.apply(context, args);\r\n      }, delay);\r\n    } else {\r\n      // 如果时间间隔超出了我们设定的时间间隔阈值，那就不等了，无论如何要反馈给用户一次响应\r\n      last = now;\r\n      fn.apply(context, args);\r\n    }\r\n  };\r\n}*/\r\n\r\n/*export function setCookie(cName, value, expiredays) {\r\n  if (expiredays > 0 && expiredays !== '100') {\r\n    let exdate = new Date();\r\n    exdate.setDate(exdate.getDate() + expiredays);\r\n    document.cookie =\r\n      cName +\r\n      '=' +\r\n      escape(value) +\r\n      (expiredays == null ? '' : ';expires=' + exdate.toGMTString());\r\n  }\r\n  if (expiredays === '100') {\r\n    let exdate = new Date('2118-01-01 00:00:00');\r\n    document.cookie =\r\n      cName +\r\n      '=' +\r\n      escape(value) +\r\n      (expiredays == null ? '' : ';expires=' + exdate.toGMTString());\r\n  }\r\n}*/\r\n/*export function getCookie(cName) {\r\n  if (document.cookie.length > 0) {\r\n    let cStart = document.cookie.indexOf(cName + '=');\r\n    if (cStart !== -1) {\r\n      cStart = cStart + cName.length + 1;\r\n      let cEnd = document.cookie.indexOf(';', cStart);\r\n      if (cEnd === -1) cEnd = document.cookie.length;\r\n      return unescape(document.cookie.substring(cStart, cEnd));\r\n    }\r\n  }\r\n  return '';\r\n}*/\r\n\r\n/*export function delCookie(name) {\r\n  let exp = new Date();\r\n  exp.setTime(exp.getTime() - 1);\r\n  let cval = getCookie(name);\r\n  if (cval != null)\r\n    document.cookie = name + '=' + cval + ';expires=' + exp.toGMTString();\r\n}*/\r\n\r\n//清除cookie\r\n/*export function clearCookie(name) {\r\n  setCookie(name, '', -1);\r\n}*/\r\n\r\n//获取QueryString的数组\r\n/*export function getQueryString() {\r\n  let result = window.location.search.match(\r\n    new RegExp('[?&][^?&]+=[^?&]+', 'g'),\r\n  );\r\n  if (result == null) {\r\n    return '';\r\n  }\r\n  for (let i = 0; i < result.length; i++) {\r\n    result[i] = result[i].substring(1);\r\n  }\r\n  return result;\r\n}*/\r\n//获取页面顶部被卷起来的高度\r\n/*export function getScrollTop() {\r\n  return Math.max(\r\n    //chrome\r\n    document.body.scrollTop,\r\n    //firefox/IE\r\n    document.documentElement.scrollTop,\r\n  );\r\n}*/\r\n//获取页面文档的总高度\r\n/*export function getDocumentHeight() {\r\n  //现代浏览器（IE9+和其他浏览器）和IE8的document.body.scrollHeight和document.documentElement.scrollHeight都可以\r\n  return Math.max(\r\n    document.body.scrollHeight,\r\n    document.documentElement.scrollHeight,\r\n  );\r\n}*/\r\n//页面浏览器视口的高度\r\n/*export function getWindowHeight() {\r\n  return document.compatMode === 'CSS1Compat'\r\n    ? document.documentElement.clientHeight\r\n    : document.body.clientHeight;\r\n}*/\r\n//// 时间 格式化成 2018-12-12 12:12:00\r\n/*export function timestampToTime(timestamp, dayMinSecFlag) {\r\n  const date = new Date(timestamp);\r\n  const Y = date.getFullYear() + '-';\r\n  const M =\r\n    (date.getMonth() + 1 < 10\r\n      ? '0' + (date.getMonth() + 1)\r\n      : date.getMonth() + 1) + '-';\r\n  const D =\r\n    date.getDate() < 10 ? '0' + date.getDate() + ' ' : date.getDate() + ' ';\r\n  const h =\r\n    date.getHours() < 10 ? '0' + date.getHours() + ':' : date.getHours() + ':';\r\n  const m =\r\n    date.getMinutes() < 10\r\n      ? '0' + date.getMinutes() + ':'\r\n      : date.getMinutes() + ':';\r\n  const s =\r\n    date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();\r\n  if (!dayMinSecFlag) {\r\n    return Y + M + D;\r\n  }\r\n  return Y + M + D + h + m + s;\r\n}*/\r\n\r\n//判断是移动端还是 pc 端 ，true 表示是移动端，false 表示是 pc 端\r\nexport function isMobileOrPc() {\r\n  return (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent))\r\n  /*if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }*/\r\n}\r\n\r\n//根据 QueryString 参数名称获取值\r\nexport function getQueryStringByName(name) {\r\n  let result = window.location.search.match(\r\n    new RegExp('[?&]' + name + '=([^&]+)', 'i'),\r\n  );\r\n  if (result == null || result.length < 1) {\r\n    return '';\r\n  }\r\n  return result[1];\r\n}\r\n","import './middle.scss';\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Middle extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  componentDidMount() {\r\n    let sakura_point_vsh = `\r\n    uniform mat4 uProjection;\r\n    uniform mat4 uModelview;\r\n    uniform vec3 uResolution;\r\n    uniform vec3 uOffset;\r\n    uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\r\n    uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\r\n\r\n    attribute vec3 aPosition;\r\n    attribute vec3 aEuler;\r\n    attribute vec2 aMisc; //x:size, y:fade\r\n\r\n    varying vec3 pposition;\r\n    varying float psize;\r\n    varying float palpha;\r\n    varying float pdist;\r\n\r\n    //varying mat3 rotMat;\r\n    varying vec3 normX;\r\n    varying vec3 normY;\r\n    varying vec3 normZ;\r\n    varying vec3 normal;\r\n\r\n    varying float diffuse;\r\n    varying float specular;\r\n    varying float rstop;\r\n    varying float distancefade;\r\n\r\n    void main(void) {\r\n        // Projection is based on vertical angle\r\n        vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\r\n        gl_Position = uProjection * pos;\r\n        gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\r\n\r\n        pposition = pos.xyz;\r\n        psize = aMisc.x;\r\n        pdist = length(pos.xyz);\r\n        palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\r\n\r\n        vec3 elrsn = sin(aEuler);\r\n        vec3 elrcs = cos(aEuler);\r\n        mat3 rotx = mat3(\r\n            1.0, 0.0, 0.0,\r\n            0.0, elrcs.x, elrsn.x,\r\n            0.0, -elrsn.x, elrcs.x\r\n        );\r\n        mat3 roty = mat3(\r\n            elrcs.y, 0.0, -elrsn.y,\r\n            0.0, 1.0, 0.0,\r\n            elrsn.y, 0.0, elrcs.y\r\n        );\r\n        mat3 rotz = mat3(\r\n            elrcs.z, elrsn.z, 0.0,\r\n            -elrsn.z, elrcs.z, 0.0,\r\n            0.0, 0.0, 1.0\r\n        );\r\n        mat3 rotmat = rotx * roty * rotz;\r\n        normal = rotmat[2];\r\n\r\n        mat3 trrotm = mat3(\r\n            rotmat[0][0], rotmat[1][0], rotmat[2][0],\r\n            rotmat[0][1], rotmat[1][1], rotmat[2][1],\r\n            rotmat[0][2], rotmat[1][2], rotmat[2][2]\r\n        );\r\n        normX = trrotm[0];\r\n        normY = trrotm[1];\r\n        normZ = trrotm[2];\r\n\r\n        const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\r\n\r\n        float tmpdfs = dot(lit, normal);\r\n        if(tmpdfs < 0.0) {\r\n            normal = -normal;\r\n            tmpdfs = dot(lit, normal);\r\n        }\r\n        diffuse = 0.4 + tmpdfs;\r\n\r\n        vec3 eyev = normalize(-pos.xyz);\r\n        if(dot(eyev, normal) > 0.0) {\r\n            vec3 hv = normalize(eyev + lit);\r\n            specular = pow(max(dot(hv, normal), 0.0), 20.0);\r\n        }\r\n        else {\r\n            specular = 0.0;\r\n        }\r\n\r\n        rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\r\n        rstop = pow(rstop, 0.5);\r\n        //-0.69315 = ln(0.5)\r\n        distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\r\n    }`;\r\n    let sakura_point_fsh = `\r\n    #ifdef GL_ES\r\n    //precision mediump float;\r\n    precision highp float;\r\n    #endif\r\n\r\n    uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\r\n    uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\r\n\r\n    const vec3 fadeCol = vec3(0.08, 0.03, 0.06);\r\n\r\n    varying vec3 pposition;\r\n    varying float psize;\r\n    varying float palpha;\r\n    varying float pdist;\r\n\r\n    //varying mat3 rotMat;\r\n    varying vec3 normX;\r\n    varying vec3 normY;\r\n    varying vec3 normZ;\r\n    varying vec3 normal;\r\n\r\n    varying float diffuse;\r\n    varying float specular;\r\n    varying float rstop;\r\n    varying float distancefade;\r\n\r\n    float ellipse(vec2 p, vec2 o, vec2 r) {\r\n        vec2 lp = (p - o) / r;\r\n        return length(lp) - 1.0;\r\n    }\r\n\r\n    void main(void) {\r\n        vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\r\n        vec3 d = vec3(0.0, 0.0, -1.0);\r\n        float nd = normZ.z; //dot(-normZ, d);\r\n        if(abs(nd) < 0.0001) discard;\r\n\r\n        float np = dot(normZ, p);\r\n        vec3 tp = p + d * np / nd;\r\n        vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\r\n\r\n        //angle = 15 degree\r\n        const float flwrsn = 0.258819045102521;\r\n        const float flwrcs = 0.965925826289068;\r\n        mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\r\n        vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\r\n\r\n        float r;\r\n        if(flwrp.x < 0.0) {\r\n            r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\r\n        }\r\n        else {\r\n            r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\r\n        }\r\n\r\n        if(r > rstop) discard;\r\n\r\n        vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\r\n        float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\r\n        col *= vec3(1.0, grady, grady);\r\n        col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\r\n        col = col * diffuse + specular;\r\n\r\n        col = mix(fadeCol, col, distancefade);\r\n\r\n        float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\r\n        alpha = smoothstep(0.0, 1.0, alpha) * palpha;\r\n\r\n        gl_FragColor = vec4(col * 0.5, alpha);\r\n    }`;\r\n    let fx_common_vsh = `\r\n    uniform vec3 uResolution;\r\n    attribute vec2 aPosition;\r\n\r\n    varying vec2 texCoord;\r\n    varying vec2 screenCoord;\r\n\r\n    void main(void) {\r\n        gl_Position = vec4(aPosition, 0.0, 1.0);\r\n        texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\r\n        screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\r\n    }`;\r\n    let bg_fsh = `\r\n    #ifdef GL_ES\r\n    //precision mediump float;\r\n    precision highp float;\r\n    #endif\r\n\r\n    uniform vec2 uTimes;\r\n\r\n    varying vec2 texCoord;\r\n    varying vec2 screenCoord;\r\n\r\n    void main(void) {\r\n        vec3 col;\r\n        float c;\r\n        vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\r\n        c = exp(-pow(length(tmpv) * 1.8, 2.0));\r\n        col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\r\n        gl_FragColor = vec4(col * 0.5, 1.0);\r\n    }`;\r\n    let fx_brightbuf_fsh = `\r\n    #ifdef GL_ES\r\n    //precision mediump float;\r\n    precision highp float;\r\n    #endif\r\n    uniform sampler2D uSrc;\r\n    uniform vec2 uDelta;\r\n\r\n    varying vec2 texCoord;\r\n    varying vec2 screenCoord;\r\n\r\n    void main(void) {\r\n        vec4 col = texture2D(uSrc, texCoord);\r\n        gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\r\n    }`;\r\n    let fx_dirblur_r4_fsh = `\r\n    #ifdef GL_ES\r\n    //precision mediump float;\r\n    precision highp float;\r\n    #endif\r\n    uniform sampler2D uSrc;\r\n    uniform vec2 uDelta;\r\n    uniform vec4 uBlurDir; //dir(x, y), stride(z, w)\r\n\r\n    varying vec2 texCoord;\r\n    varying vec2 screenCoord;\r\n\r\n    void main(void) {\r\n        vec4 col = texture2D(uSrc, texCoord);\r\n        col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\r\n        col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\r\n        col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\r\n        col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\r\n        gl_FragColor = col / 5.0;\r\n    }`;\r\n    let pp_final_vsh = `\r\n    uniform vec3 uResolution;\r\n    attribute vec2 aPosition;\r\n    varying vec2 texCoord;\r\n    varying vec2 screenCoord;\r\n    void main(void) {\r\n        gl_Position = vec4(aPosition, 0.0, 1.0);\r\n        texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\r\n        screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\r\n    }`;\r\n    let pp_final_fsh = `\r\n    #ifdef GL_ES\r\n    //precision mediump float;\r\n    precision highp float;\r\n    #endif\r\n    uniform sampler2D uSrc;\r\n    uniform sampler2D uBloom;\r\n    uniform vec2 uDelta;\r\n    varying vec2 texCoord;\r\n    varying vec2 screenCoord;\r\n    void main(void) {\r\n        vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\r\n        vec4 bloomcol = texture2D(uBloom, texCoord);\r\n        vec4 col;\r\n        col = srccol + bloomcol * (vec4(1.0) + srccol);\r\n        col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\r\n        col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\r\n\r\n        gl_FragColor = vec4(col.rgb, 1.0);\r\n        gl_FragColor.a = 1.0;\r\n    }`;\r\n\r\n    // Utilities\r\n    var Vector3 = {};\r\n    var Matrix44 = {};\r\n    Vector3.create = function(x, y, z) {\r\n      return { x: x, y: y, z: z };\r\n    };\r\n    Vector3.dot = function(v0, v1) {\r\n      return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\r\n    };\r\n    Vector3.cross = function(v, v0, v1) {\r\n      v.x = v0.y * v1.z - v0.z * v1.y;\r\n      v.y = v0.z * v1.x - v0.x * v1.z;\r\n      v.z = v0.x * v1.y - v0.y * v1.x;\r\n    };\r\n    Vector3.normalize = function(v) {\r\n      var l = v.x * v.x + v.y * v.y + v.z * v.z;\r\n      if (l > 0.00001) {\r\n        l = 1.0 / Math.sqrt(l);\r\n        v.x *= l;\r\n        v.y *= l;\r\n        v.z *= l;\r\n      }\r\n    };\r\n    Vector3.arrayForm = function(v) {\r\n      if (v.array) {\r\n        v.array[0] = v.x;\r\n        v.array[1] = v.y;\r\n        v.array[2] = v.z;\r\n      } else {\r\n        v.array = new Float32Array([v.x, v.y, v.z]);\r\n      }\r\n      return v.array;\r\n    };\r\n    Matrix44.createIdentity = function() {\r\n      return new Float32Array([\r\n        1.0,\r\n        0.0,\r\n        0.0,\r\n        0.0,\r\n        0.0,\r\n        1.0,\r\n        0.0,\r\n        0.0,\r\n        0.0,\r\n        0.0,\r\n        1.0,\r\n        0.0,\r\n        0.0,\r\n        0.0,\r\n        0.0,\r\n        1.0,\r\n      ]);\r\n    };\r\n    Matrix44.loadProjection = function(m, aspect, vdeg, near, far) {\r\n      let h = near * Math.tan(((vdeg * Math.PI) / 180.0) * 0.5) * 2.0;\r\n      let w = h * aspect;\r\n\r\n      m[0] = (2.0 * near) / w;\r\n      m[1] = 0.0;\r\n      m[2] = 0.0;\r\n      m[3] = 0.0;\r\n\r\n      m[4] = 0.0;\r\n      m[5] = (2.0 * near) / h;\r\n      m[6] = 0.0;\r\n      m[7] = 0.0;\r\n\r\n      m[8] = 0.0;\r\n      m[9] = 0.0;\r\n      m[10] = -(far + near) / (far - near);\r\n      m[11] = -1.0;\r\n\r\n      m[12] = 0.0;\r\n      m[13] = 0.0;\r\n      m[14] = (-2.0 * far * near) / (far - near);\r\n      m[15] = 0.0;\r\n    };\r\n    Matrix44.loadLookAt = function(m, vpos, vlook, vup) {\r\n      let frontv = Vector3.create(\r\n        vpos.x - vlook.x,\r\n        vpos.y - vlook.y,\r\n        vpos.z - vlook.z,\r\n      );\r\n      Vector3.normalize(frontv);\r\n      let sidev = Vector3.create(1.0, 0.0, 0.0);\r\n      Vector3.cross(sidev, vup, frontv);\r\n      Vector3.normalize(sidev);\r\n      let topv = Vector3.create(1.0, 0.0, 0.0);\r\n      Vector3.cross(topv, frontv, sidev);\r\n      Vector3.normalize(topv);\r\n\r\n      m[0] = sidev.x;\r\n      m[1] = topv.x;\r\n      m[2] = frontv.x;\r\n      m[3] = 0.0;\r\n\r\n      m[4] = sidev.y;\r\n      m[5] = topv.y;\r\n      m[6] = frontv.y;\r\n      m[7] = 0.0;\r\n\r\n      m[8] = sidev.z;\r\n      m[9] = topv.z;\r\n      m[10] = frontv.z;\r\n      m[11] = 0.0;\r\n\r\n      m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);\r\n      m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);\r\n      m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);\r\n      m[15] = 1.0;\r\n    };\r\n\r\n    //\r\n    var timeInfo = {\r\n      start: 0,\r\n      prev: 0, // Date\r\n      delta: 0,\r\n      elapsed: 0, // Number(sec)\r\n    };\r\n\r\n    //\r\n    var gl;\r\n    var renderSpec = {\r\n      width: 0,\r\n      height: 0,\r\n      aspect: 1,\r\n      array: new Float32Array(3),\r\n      halfWidth: 0,\r\n      halfHeight: 0,\r\n      halfArray: new Float32Array(3),\r\n      // and some render targets. see setViewport()\r\n    };\r\n    renderSpec.setSize = function(w, h) {\r\n      renderSpec.width = w;\r\n      renderSpec.height = h;\r\n      renderSpec.aspect = renderSpec.width / renderSpec.height;\r\n      renderSpec.array[0] = renderSpec.width;\r\n      renderSpec.array[1] = renderSpec.height;\r\n      renderSpec.array[2] = renderSpec.aspect;\r\n\r\n      renderSpec.halfWidth = Math.floor(w / 2);\r\n      renderSpec.halfHeight = Math.floor(h / 2);\r\n      renderSpec.halfArray[0] = renderSpec.halfWidth;\r\n      renderSpec.halfArray[1] = renderSpec.halfHeight;\r\n      renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;\r\n    };\r\n\r\n    function deleteRenderTarget(rt) {\r\n      gl.deleteFramebuffer(rt.frameBuffer);\r\n      gl.deleteRenderbuffer(rt.renderBuffer);\r\n      gl.deleteTexture(rt.texture);\r\n    }\r\n\r\n    function createRenderTarget(w, h) {\r\n      var ret = {\r\n        width: w,\r\n        height: h,\r\n        sizeArray: new Float32Array([w, h, w / h]),\r\n        dtxArray: new Float32Array([1.0 / w, 1.0 / h]),\r\n      };\r\n      ret.frameBuffer = gl.createFramebuffer();\r\n      ret.renderBuffer = gl.createRenderbuffer();\r\n      ret.texture = gl.createTexture();\r\n\r\n      gl.bindTexture(gl.TEXTURE_2D, ret.texture);\r\n      gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n        0,\r\n        gl.RGBA,\r\n        w,\r\n        h,\r\n        0,\r\n        gl.RGBA,\r\n        gl.UNSIGNED_BYTE,\r\n        null,\r\n      );\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);\r\n      gl.framebufferTexture2D(\r\n        gl.FRAMEBUFFER,\r\n        gl.COLOR_ATTACHMENT0,\r\n        gl.TEXTURE_2D,\r\n        ret.texture,\r\n        0,\r\n      );\r\n\r\n      gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);\r\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);\r\n      gl.framebufferRenderbuffer(\r\n        gl.FRAMEBUFFER,\r\n        gl.DEPTH_ATTACHMENT,\r\n        gl.RENDERBUFFER,\r\n        ret.renderBuffer,\r\n      );\r\n\r\n      gl.bindTexture(gl.TEXTURE_2D, null);\r\n      gl.bindRenderbuffer(gl.RENDERBUFFER, null);\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\r\n      return ret;\r\n    }\r\n\r\n    function compileShader(shtype, shsrc) {\r\n      var retsh = gl.createShader(shtype);\r\n\r\n      gl.shaderSource(retsh, shsrc);\r\n      gl.compileShader(retsh);\r\n\r\n      if (!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {\r\n        var errlog = gl.getShaderInfoLog(retsh);\r\n        gl.deleteShader(retsh);\r\n        console.error(errlog);\r\n        return null;\r\n      }\r\n      return retsh;\r\n    }\r\n\r\n    function createShader(vtxsrc, frgsrc, uniformlist, attrlist) {\r\n      var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);\r\n      var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);\r\n\r\n      if (vsh == null || fsh == null) {\r\n        return null;\r\n      }\r\n\r\n      var prog = gl.createProgram();\r\n      gl.attachShader(prog, vsh);\r\n      gl.attachShader(prog, fsh);\r\n\r\n      gl.deleteShader(vsh);\r\n      gl.deleteShader(fsh);\r\n\r\n      gl.linkProgram(prog);\r\n      if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\r\n        var errlog = gl.getProgramInfoLog(prog);\r\n        console.error(errlog);\r\n        return null;\r\n      }\r\n\r\n      if (uniformlist) {\r\n        prog.uniforms = {};\r\n        for (var i = 0; i < uniformlist.length; i++) {\r\n          prog.uniforms[uniformlist[i]] = gl.getUniformLocation(\r\n            prog,\r\n            uniformlist[i],\r\n          );\r\n        }\r\n      }\r\n\r\n      if (attrlist) {\r\n        prog.attributes = {};\r\n        for (let i = 0; i < attrlist.length; i++) {\r\n          let attr = attrlist[i];\r\n          prog.attributes[attr] = gl.getAttribLocation(prog, attr);\r\n        }\r\n      }\r\n\r\n      return prog;\r\n    }\r\n\r\n    function homeShader(prog) {\r\n      gl.useProgram(prog);\r\n      for (let attr in prog.attributes) {\r\n        gl.enableVertexAttribArray(prog.attributes[attr]);\r\n      }\r\n    }\r\n\r\n    function unhomeShader(prog) {\r\n      for (let attr in prog.attributes) {\r\n        gl.disableVertexAttribArray(prog.attributes[attr]);\r\n      }\r\n      gl.useProgram(null);\r\n    }\r\n\r\n    /////\r\n    var projection = {\r\n      angle: 60,\r\n      nearfar: new Float32Array([0.1, 100.0]),\r\n      matrix: Matrix44.createIdentity(),\r\n    };\r\n    var camera = {\r\n      position: Vector3.create(0, 0, 100),\r\n      lookat: Vector3.create(0, 0, 0),\r\n      up: Vector3.create(0, 1, 0),\r\n      dof: Vector3.create(10.0, 4.0, 8.0),\r\n      matrix: Matrix44.createIdentity(),\r\n    };\r\n\r\n    var pointFlower = {};\r\n    // var meshFlower = {};\r\n    var sceneStandBy = false;\r\n\r\n    var BlossomParticle = function() {\r\n      this.velocity = new Array(3);\r\n      this.rotation = new Array(3);\r\n      this.position = new Array(3);\r\n      this.euler = new Array(3);\r\n      this.size = 1.0;\r\n      this.alpha = 1.0;\r\n      this.zkey = 0.0;\r\n    };\r\n\r\n    BlossomParticle.prototype.setVelocity = function(vx, vy, vz) {\r\n      this.velocity[0] = vx;\r\n      this.velocity[1] = vy;\r\n      this.velocity[2] = vz;\r\n    };\r\n\r\n    BlossomParticle.prototype.setRotation = function(rx, ry, rz) {\r\n      this.rotation[0] = rx;\r\n      this.rotation[1] = ry;\r\n      this.rotation[2] = rz;\r\n    };\r\n\r\n    BlossomParticle.prototype.setPosition = function(nx, ny, nz) {\r\n      this.position[0] = nx;\r\n      this.position[1] = ny;\r\n      this.position[2] = nz;\r\n    };\r\n\r\n    BlossomParticle.prototype.setEulerAngles = function(rx, ry, rz) {\r\n      this.euler[0] = rx;\r\n      this.euler[1] = ry;\r\n      this.euler[2] = rz;\r\n    };\r\n\r\n    BlossomParticle.prototype.setSize = function(s) {\r\n      this.size = s;\r\n    };\r\n\r\n    BlossomParticle.prototype.update = function(dt, et) {\r\n      this.position[0] += this.velocity[0] * dt;\r\n      this.position[1] += this.velocity[1] * dt;\r\n      this.position[2] += this.velocity[2] * dt;\r\n\r\n      this.euler[0] += this.rotation[0] * dt;\r\n      this.euler[1] += this.rotation[1] * dt;\r\n      this.euler[2] += this.rotation[2] * dt;\r\n    };\r\n\r\n    function createPointFlowers() {\r\n      // get point sizes\r\n      var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);\r\n      renderSpec.pointSize = { min: prm[0], max: prm[1] };\r\n\r\n      var vtxsrc = sakura_point_vsh;\r\n      var frgsrc = sakura_point_fsh;\r\n\r\n      pointFlower.program = createShader(\r\n        vtxsrc,\r\n        frgsrc,\r\n        [\r\n          'uProjection',\r\n          'uModelview',\r\n          'uResolution',\r\n          'uOffset',\r\n          'uDOF',\r\n          'uFade',\r\n        ],\r\n        ['aPosition', 'aEuler', 'aMisc'],\r\n      );\r\n\r\n      homeShader(pointFlower.program);\r\n      pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);\r\n      pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);\r\n\r\n      // paramerters: velocity[3], rotate[3]\r\n      pointFlower.numFlowers = 1600;\r\n      pointFlower.particles = new Array(pointFlower.numFlowers);\r\n      // vertex attributes {position[3], euler_xyz[3], size[1]}\r\n      pointFlower.dataArray = new Float32Array(\r\n        pointFlower.numFlowers * (3 + 3 + 2),\r\n      );\r\n      pointFlower.positionArrayOffset = 0;\r\n      pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;\r\n      pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;\r\n\r\n      pointFlower.buffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n      unhomeShader(pointFlower.program);\r\n\r\n      for (let i = 0; i < pointFlower.numFlowers; i++) {\r\n        pointFlower.particles[i] = new BlossomParticle();\r\n      }\r\n    }\r\n\r\n    function initPointFlowers() {\r\n      //area\r\n      pointFlower.area = Vector3.create(20.0, 20.0, 20.0);\r\n      pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;\r\n\r\n      pointFlower.fader.x = 10.0; //env fade start\r\n      pointFlower.fader.y = pointFlower.area.z; //env fade half\r\n      pointFlower.fader.z = 0.1; //near fade start\r\n\r\n      //particles\r\n      var PI2 = Math.PI * 2.0;\r\n      var tmpv3 = Vector3.create(0, 0, 0);\r\n      var tmpv = 0;\r\n      var symmetryrand = function() {\r\n        return Math.random() * 2.0 - 1.0;\r\n      };\r\n      for (let i = 0; i < pointFlower.numFlowers; i++) {\r\n        let tmpprtcl = pointFlower.particles[i];\r\n\r\n        //velocity\r\n        tmpv3.x = symmetryrand() * 0.3 + 0.8;\r\n        tmpv3.y = symmetryrand() * 0.2 - 1.0;\r\n        tmpv3.z = symmetryrand() * 0.3 + 0.5;\r\n        Vector3.normalize(tmpv3);\r\n        tmpv = 2.0 + Math.random() * 1.0;\r\n        tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);\r\n\r\n        //rotation\r\n        tmpprtcl.setRotation(\r\n          symmetryrand() * PI2 * 0.5,\r\n          symmetryrand() * PI2 * 0.5,\r\n          symmetryrand() * PI2 * 0.5,\r\n        );\r\n\r\n        //position\r\n        tmpprtcl.setPosition(\r\n          symmetryrand() * pointFlower.area.x,\r\n          symmetryrand() * pointFlower.area.y,\r\n          symmetryrand() * pointFlower.area.z,\r\n        );\r\n\r\n        //euler\r\n        tmpprtcl.setEulerAngles(\r\n          Math.random() * Math.PI * 2.0,\r\n          Math.random() * Math.PI * 2.0,\r\n          Math.random() * Math.PI * 2.0,\r\n        );\r\n\r\n        //size\r\n        tmpprtcl.setSize(0.9 + Math.random() * 0.1);\r\n      }\r\n    }\r\n\r\n    function renderPointFlowers() {\r\n      //update\r\n      var PI2 = Math.PI * 2.0;\r\n      // var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];\r\n      var repeatPos = function(prt, cmp, limit) {\r\n        if (Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {\r\n          //out of area\r\n          if (prt.position[cmp] > 0) {\r\n            prt.position[cmp] -= limit * 2.0;\r\n          } else {\r\n            prt.position[cmp] += limit * 2.0;\r\n          }\r\n        }\r\n      };\r\n      var repeatEuler = function(prt, cmp) {\r\n        prt.euler[cmp] = prt.euler[cmp] % PI2;\r\n        if (prt.euler[cmp] < 0.0) {\r\n          prt.euler[cmp] += PI2;\r\n        }\r\n      };\r\n\r\n      for (let i = 0; i < pointFlower.numFlowers; i++) {\r\n        let prtcl = pointFlower.particles[i];\r\n        prtcl.update(timeInfo.delta, timeInfo.elapsed);\r\n        repeatPos(prtcl, 0, pointFlower.area.x);\r\n        repeatPos(prtcl, 1, pointFlower.area.y);\r\n        repeatPos(prtcl, 2, pointFlower.area.z);\r\n        repeatEuler(prtcl, 0);\r\n        repeatEuler(prtcl, 1);\r\n        repeatEuler(prtcl, 2);\r\n\r\n        prtcl.alpha = 1.0; //(pointFlower.area.z - prtcl.position[2]) * 0.5;\r\n\r\n        prtcl.zkey =\r\n          camera.matrix[2] * prtcl.position[0] +\r\n          camera.matrix[6] * prtcl.position[1] +\r\n          camera.matrix[10] * prtcl.position[2] +\r\n          camera.matrix[14];\r\n      }\r\n\r\n      // sort\r\n      pointFlower.particles.sort(function(p0, p1) {\r\n        return p0.zkey - p1.zkey;\r\n      });\r\n\r\n      // update data\r\n      var ipos = pointFlower.positionArrayOffset;\r\n      var ieuler = pointFlower.eulerArrayOffset;\r\n      var imisc = pointFlower.miscArrayOffset;\r\n      for (let i = 0; i < pointFlower.numFlowers; i++) {\r\n        let prtcl = pointFlower.particles[i];\r\n        pointFlower.dataArray[ipos] = prtcl.position[0];\r\n        pointFlower.dataArray[ipos + 1] = prtcl.position[1];\r\n        pointFlower.dataArray[ipos + 2] = prtcl.position[2];\r\n        ipos += 3;\r\n        pointFlower.dataArray[ieuler] = prtcl.euler[0];\r\n        pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];\r\n        pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];\r\n        ieuler += 3;\r\n        pointFlower.dataArray[imisc] = prtcl.size;\r\n        pointFlower.dataArray[imisc + 1] = prtcl.alpha;\r\n        imisc += 2;\r\n      }\r\n\r\n      //draw\r\n      gl.enable(gl.BLEND);\r\n      //gl.disable(gl.DEPTH_TEST);\r\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n      var prog = pointFlower.program;\r\n      homeShader(prog);\r\n\r\n      gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);\r\n      gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);\r\n      gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\r\n      gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));\r\n      gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\r\n\r\n      gl.vertexAttribPointer(\r\n        prog.attributes.aPosition,\r\n        3,\r\n        gl.FLOAT,\r\n        false,\r\n        0,\r\n        pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT,\r\n      );\r\n      gl.vertexAttribPointer(\r\n        prog.attributes.aEuler,\r\n        3,\r\n        gl.FLOAT,\r\n        false,\r\n        0,\r\n        pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT,\r\n      );\r\n      gl.vertexAttribPointer(\r\n        prog.attributes.aMisc,\r\n        2,\r\n        gl.FLOAT,\r\n        false,\r\n        0,\r\n        pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT,\r\n      );\r\n\r\n      // doubler\r\n      for (let i = 1; i < 2; i++) {\r\n        let zpos = i * -2.0;\r\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\r\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\r\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\r\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\r\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\r\n\r\n        pointFlower.offset[0] = pointFlower.area.x * -1.0;\r\n        pointFlower.offset[1] = pointFlower.area.y * 1.0;\r\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\r\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\r\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\r\n\r\n        pointFlower.offset[0] = pointFlower.area.x * 1.0;\r\n        pointFlower.offset[1] = pointFlower.area.y * -1.0;\r\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\r\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\r\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\r\n\r\n        pointFlower.offset[0] = pointFlower.area.x * 1.0;\r\n        pointFlower.offset[1] = pointFlower.area.y * 1.0;\r\n        pointFlower.offset[2] = pointFlower.area.z * zpos;\r\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\r\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\r\n      }\r\n\r\n      //main\r\n      pointFlower.offset[0] = 0.0;\r\n      pointFlower.offset[1] = 0.0;\r\n      pointFlower.offset[2] = 0.0;\r\n      gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\r\n      gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n      unhomeShader(prog);\r\n\r\n      gl.enable(gl.DEPTH_TEST);\r\n      gl.disable(gl.BLEND);\r\n    }\r\n\r\n    // effects\r\n    //common util\r\n    function createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {\r\n      var ret = {};\r\n      var unifs = ['uResolution', 'uSrc', 'uDelta'];\r\n      if (exunifs) {\r\n        unifs = unifs.concat(exunifs);\r\n      }\r\n      var attrs = ['aPosition'];\r\n      if (exattrs) {\r\n        attrs = attrs.concat(exattrs);\r\n      }\r\n\r\n      ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);\r\n      homeShader(ret.program);\r\n\r\n      ret.dataArray = new Float32Array([\r\n        -1.0,\r\n        -1.0,\r\n        1.0,\r\n        -1.0,\r\n        -1.0,\r\n        1.0,\r\n        1.0,\r\n        1.0,\r\n      ]);\r\n      ret.buffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n      unhomeShader(ret.program);\r\n\r\n      return ret;\r\n    }\r\n\r\n    // basic usage\r\n    // homeEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize\r\n    // gl.uniform**(...); //additional uniforms\r\n    // drawEffect()\r\n    // unhomeEffect(prog)\r\n    // TEXTURE0 makes src\r\n    function homeEffect(fxobj, srctex) {\r\n      var prog = fxobj.program;\r\n      homeShader(prog);\r\n      gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\r\n\r\n      if (srctex != null) {\r\n        gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);\r\n        gl.uniform1i(prog.uniforms.uSrc, 0);\r\n\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, srctex.texture);\r\n      }\r\n    }\r\n    function drawEffect(fxobj) {\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);\r\n      gl.vertexAttribPointer(\r\n        fxobj.program.attributes.aPosition,\r\n        2,\r\n        gl.FLOAT,\r\n        false,\r\n        0,\r\n        0,\r\n      );\r\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\r\n    }\r\n    function unhomeEffect(fxobj) {\r\n      unhomeShader(fxobj.program);\r\n    }\r\n\r\n    var effectLib = {};\r\n    function createEffectLib() {\r\n      var vtxsrc, frgsrc;\r\n      //common\r\n      var cmnvtxsrc = fx_common_vsh;\r\n\r\n      //background\r\n      frgsrc = bg_fsh;\r\n      effectLib.sceneBg = createEffectProgram(\r\n        cmnvtxsrc,\r\n        frgsrc,\r\n        ['uTimes'],\r\n        null,\r\n      );\r\n\r\n      // make brightpixels buffer\r\n      frgsrc = fx_brightbuf_fsh;\r\n      effectLib.mkBrightBuf = createEffectProgram(\r\n        cmnvtxsrc,\r\n        frgsrc,\r\n        null,\r\n        null,\r\n      );\r\n\r\n      // direction blur\r\n      frgsrc = fx_dirblur_r4_fsh;\r\n      effectLib.dirBlur = createEffectProgram(\r\n        cmnvtxsrc,\r\n        frgsrc,\r\n        ['uBlurDir'],\r\n        null,\r\n      );\r\n\r\n      //final composite\r\n      vtxsrc = pp_final_vsh;\r\n      frgsrc = pp_final_fsh;\r\n      // console.log('frgsrc :',frgsrc )\r\n      effectLib.finalComp = createEffectProgram(\r\n        vtxsrc,\r\n        frgsrc,\r\n        ['uBloom'],\r\n        null,\r\n      );\r\n    }\r\n\r\n    // background\r\n    function createBackground() {\r\n      //console.log(\"create background\");\r\n    }\r\n    function initBackground() {\r\n      //console.log(\"init background\");\r\n    }\r\n    function renderBackground() {\r\n      gl.disable(gl.DEPTH_TEST);\r\n\r\n      homeEffect(effectLib.sceneBg, null);\r\n      gl.uniform2f(\r\n        effectLib.sceneBg.program.uniforms.uTimes,\r\n        timeInfo.elapsed,\r\n        timeInfo.delta,\r\n      );\r\n      drawEffect(effectLib.sceneBg);\r\n      unhomeEffect(effectLib.sceneBg);\r\n\r\n      gl.enable(gl.DEPTH_TEST);\r\n    }\r\n\r\n    // post process\r\n    // var postProcess = {};\r\n    function createPostProcess() {\r\n      //console.log(\"create post process\");\r\n    }\r\n    function initPostProcess() {\r\n      //console.log(\"init post process\");\r\n    }\r\n\r\n    function renderPostProcess() {\r\n      gl.enable(gl.TEXTURE_2D);\r\n      gl.disable(gl.DEPTH_TEST);\r\n      var bindRT = function(rt, isclear) {\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);\r\n        gl.viewport(0, 0, rt.width, rt.height);\r\n        if (isclear) {\r\n          gl.clearColor(0, 0, 0, 0);\r\n          gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        }\r\n      };\r\n\r\n      //make bright buff\r\n      bindRT(renderSpec.wHalfRT0, true);\r\n      homeEffect(effectLib.mkBrightBuf, renderSpec.mainRT);\r\n      drawEffect(effectLib.mkBrightBuf);\r\n      unhomeEffect(effectLib.mkBrightBuf);\r\n\r\n      // make bloom\r\n      for (let i = 0; i < 2; i++) {\r\n        let p = 1.5 + 1 * i;\r\n        let s = 2.0 + 1 * i;\r\n        bindRT(renderSpec.wHalfRT1, true);\r\n        homeEffect(effectLib.dirBlur, renderSpec.wHalfRT0);\r\n        gl.uniform4f(\r\n          effectLib.dirBlur.program.uniforms.uBlurDir,\r\n          p,\r\n          0.0,\r\n          s,\r\n          0.0,\r\n        );\r\n        drawEffect(effectLib.dirBlur);\r\n        unhomeEffect(effectLib.dirBlur);\r\n\r\n        bindRT(renderSpec.wHalfRT0, true);\r\n        homeEffect(effectLib.dirBlur, renderSpec.wHalfRT1);\r\n        gl.uniform4f(\r\n          effectLib.dirBlur.program.uniforms.uBlurDir,\r\n          0.0,\r\n          p,\r\n          0.0,\r\n          s,\r\n        );\r\n        drawEffect(effectLib.dirBlur);\r\n        unhomeEffect(effectLib.dirBlur);\r\n      }\r\n\r\n      //display\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n      gl.viewport(0, 0, renderSpec.width, renderSpec.height);\r\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n      homeEffect(effectLib.finalComp, renderSpec.mainRT);\r\n      gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);\r\n      gl.activeTexture(gl.TEXTURE1);\r\n      gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);\r\n      drawEffect(effectLib.finalComp);\r\n      unhomeEffect(effectLib.finalComp);\r\n\r\n      gl.enable(gl.DEPTH_TEST);\r\n    }\r\n\r\n    /////\r\n    // var SceneEnv = {};\r\n    function createScene() {\r\n      createEffectLib();\r\n      createBackground();\r\n      createPointFlowers();\r\n      createPostProcess();\r\n      sceneStandBy = true;\r\n    }\r\n\r\n    function initScene() {\r\n      initBackground();\r\n      initPointFlowers();\r\n      initPostProcess();\r\n\r\n      //camera.position.z = 17.320508;\r\n      camera.position.z = pointFlower.area.z + projection.nearfar[0];\r\n      projection.angle =\r\n        ((Math.atan2(\r\n          pointFlower.area.y,\r\n          camera.position.z + pointFlower.area.z,\r\n          ) *\r\n          180.0) /\r\n          Math.PI) *\r\n        2.0;\r\n      Matrix44.loadProjection(\r\n        projection.matrix,\r\n        renderSpec.aspect,\r\n        projection.angle,\r\n        projection.nearfar[0],\r\n        projection.nearfar[1],\r\n      );\r\n    }\r\n\r\n    function renderScene() {\r\n      //draw\r\n      Matrix44.loadLookAt(\r\n        camera.matrix,\r\n        camera.position,\r\n        camera.lookat,\r\n        camera.up,\r\n      );\r\n\r\n      gl.enable(gl.DEPTH_TEST);\r\n\r\n      //gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);\r\n      gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);\r\n      gl.clearColor(0.005, 0, 0.05, 0);\r\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n      renderBackground();\r\n      renderPointFlowers();\r\n      renderPostProcess();\r\n    }\r\n\r\n    /////\r\n    function onResize(e) {\r\n      makeCanvasFullScreen(document.getElementById('sakura'));\r\n      setViewports();\r\n      if (sceneStandBy) {\r\n        initScene();\r\n      }\r\n    }\r\n\r\n    function setViewports() {\r\n      renderSpec.setSize(gl.canvas.width, gl.canvas.height);\r\n\r\n      gl.clearColor(0.2, 0.2, 0.5, 1.0);\r\n      gl.viewport(0, 0, renderSpec.width, renderSpec.height);\r\n\r\n      var rtfunc = function(rtname, rtw, rth) {\r\n        var rt = renderSpec[rtname];\r\n        if (rt) deleteRenderTarget(rt);\r\n        renderSpec[rtname] = createRenderTarget(rtw, rth);\r\n      };\r\n      rtfunc('mainRT', renderSpec.width, renderSpec.height);\r\n      rtfunc('wFullRT0', renderSpec.width, renderSpec.height);\r\n      rtfunc('wFullRT1', renderSpec.width, renderSpec.height);\r\n      rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);\r\n      rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);\r\n    }\r\n\r\n    function render() {\r\n      renderScene();\r\n    }\r\n\r\n    var animating = true;\r\n    // function toggleAnimation(elm) {\r\n    //   animating ^= true;\r\n    //   if (animating) animate();\r\n    //   if (elm) {\r\n    //     elm.innerHTML = animating ? 'Stop' : 'Start';\r\n    //   }\r\n    // }\r\n\r\n    // function stepAnimation() {\r\n    //   if (!animating) animate();\r\n    // }\r\n\r\n    function animate() {\r\n      var curdate = new Date();\r\n      timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;\r\n      timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;\r\n      timeInfo.prev = curdate;\r\n\r\n      if (animating) requestAnimationFrame(animate);\r\n      render();\r\n    }\r\n\r\n    function makeCanvasFullScreen(canvas) {\r\n      var b = document.body;\r\n      var d = document.documentElement;\r\n      let fullw = Math.max(\r\n        b.clientWidth,\r\n        b.scrollWidth,\r\n        d.scrollWidth,\r\n        d.clientWidth,\r\n      );\r\n      let fullh = Math.max(\r\n        b.clientHeight,\r\n        b.scrollHeight,\r\n        d.scrollHeight,\r\n        d.clientHeight,\r\n      );\r\n      canvas.width = fullw;\r\n      canvas.height = fullh;\r\n    }\r\n\r\n    // window.addEventListener('load', function(e) {\r\n    //   var canvas = document.getElementById('sakura');\r\n    //   try {\r\n    //     makeCanvasFullScreen(canvas);\r\n    //     gl = canvas.getContext('experimental-webgl');\r\n    //   } catch (e) {\r\n    //     alert('WebGL not supported.' + e);\r\n    //     console.error(e);\r\n    //     return;\r\n    //   }\r\n\r\n    //   window.addEventListener('resize', onResize);\r\n\r\n    //   setViewports();\r\n    //   createScene();\r\n    //   initScene();\r\n\r\n    //   timeInfo.start = new Date();\r\n    //   timeInfo.prev = timeInfo.start;\r\n    //   animate();\r\n    // });\r\n    var canvas = document.getElementById('sakura');\r\n    try {\r\n      makeCanvasFullScreen(canvas);\r\n      gl = canvas.getContext('experimental-webgl');\r\n    } catch (e) {\r\n      alert('WebGL not supported.' + e);\r\n      console.error(e);\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('resize', onResize);\r\n\r\n    setViewports();\r\n    createScene();\r\n    initScene();\r\n\r\n    timeInfo.start = new Date();\r\n    timeInfo.prev = timeInfo.start;\r\n    animate();\r\n\r\n    //set window.requestAnimationFrame\r\n    (function(w, r) {\r\n      w['r' + r] =\r\n        w['r' + r] ||\r\n        w['webkitR' + r] ||\r\n        w['mozR' + r] ||\r\n        w['msR' + r] ||\r\n        w['oR' + r] ||\r\n        function(c) {\r\n          w.setTimeout(c, 1000 / 60);\r\n        };\r\n    })(window, 'equestAnimationFrame');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"middle\">\r\n        <canvas id=\"sakura\" />\r\n        <div className=\"content\">\r\n          <div className=\"middle-header\">\r\n            <Link className=\"link\" to={`/home`}>\r\n              <img className=\"middle-logo\" src=\"https://6672-frist-ixdkl-1300617104.tcb.qcloud.la/blog/www/logo.jpg\" alt=\"Yang Ruirui logo\" />\r\n            </Link>\r\n          </div>\r\n          <div className=\"middle-body\">\r\n            <div className=\"list\">\r\n              <Link className=\"link\" to={`/`}>\r\n                官网\r\n              </Link>\r\n              {/*<Link className=\"link\" to={`/project`}>*/}\r\n              {/*  项目*/}\r\n              {/*</Link>*/}\r\n              <a\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"link\"\r\n                href={`http://admin.yangruirui.cn`}\r\n              >\r\n                后台管理系统\r\n              </a>\r\n              {/*<a*/}\r\n              {/*  target=\"_blank\"*/}\r\n              {/*  rel=\"noopener noreferrer\"*/}\r\n              {/*  className=\"link\"*/}\r\n              {/*  href={`https://github.com/biaochenxuying`}*/}\r\n              {/*>*/}\r\n              {/*  github*/}\r\n              {/*</a>*/}\r\n              {/*<a*/}\r\n              {/*  target=\"_blank\"*/}\r\n              {/*  rel=\"noopener noreferrer\"*/}\r\n              {/*  className=\"link\"*/}\r\n              {/*  href={`https://juejin.im/user/591d6b4d0ce463006926ae40`}*/}\r\n              {/*>*/}\r\n              {/*  掘金*/}\r\n              {/*</a>*/}\r\n              {/*<a*/}\r\n              {/*  target=\"_blank\"*/}\r\n              {/*  rel=\"noopener noreferrer\"*/}\r\n              {/*  className=\"link\"*/}\r\n              {/*  href={`https://www.zhihu.com/people/gu-jian-qi-tan-shui/activities`}*/}\r\n              {/*>*/}\r\n              {/*  知乎*/}\r\n              {/*</a>*/}\r\n              {/*<a*/}\r\n              {/*  target=\"_blank\"*/}\r\n              {/*  rel=\"noopener noreferrer\"*/}\r\n              {/*  className=\"link\"*/}\r\n              {/*  href={`https://segmentfault.com/u/biaochenxuying`}*/}\r\n              {/*>*/}\r\n              {/*  segmentfault*/}\r\n              {/*</a>*/}\r\n              {/*<a*/}\r\n              {/*  target=\"_blank\"*/}\r\n              {/*  rel=\"noopener noreferrer\"*/}\r\n              {/*  className=\"link\"*/}\r\n              {/*  href={`https://www.jianshu.com/u/91717b553bfd`}*/}\r\n              {/*>*/}\r\n              {/*  简书*/}\r\n              {/*</a>*/}\r\n            </div>\r\n            {/* <div className=\"logion\"> 加班到天明，学习到昏厥 ！！！ </div>*/}\r\n            {/*<div className=\"introduce\"> 时光正好，未来可期，加油 ！ </div>*/}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Middle;\r\n","(function(window,document){\r\n  var hearts = [];\r\n  window.requestAnimationFrame = (function(){\r\n    return window.requestAnimationFrame ||\r\n      window.webkitRequestAnimationFrame ||\r\n      window.mozRequestAnimationFrame ||\r\n      window.oRequestAnimationFrame ||\r\n      window.msRequestAnimationFrame ||\r\n      function (callback){\r\n        setTimeout(callback,1000/60);\r\n      }\r\n  })();\r\n  init();\r\n  function init(){\r\n    css(\".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}\");\r\n    attachEvent();\r\n    gameloop();\r\n  }\r\n  function gameloop(){\r\n    for(var i=0;i<hearts.length;i++){\r\n      if(hearts[i].alpha <=0){\r\n        document.body.removeChild(hearts[i].el);\r\n        hearts.splice(i,1);\r\n        continue;\r\n      }\r\n      hearts[i].y--;\r\n      hearts[i].scale += 0.004;\r\n      hearts[i].alpha -= 0.013;\r\n      hearts[i].el.style.cssText = \"left:\"+hearts[i].x+\"px;top:\"+hearts[i].y+\"px;opacity:\"+hearts[i].alpha+\";transform:scale(\"+hearts[i].scale+\",\"+hearts[i].scale+\") rotate(45deg);background:\"+hearts[i].color;\r\n    }\r\n    requestAnimationFrame(gameloop);\r\n  }\r\n  function attachEvent(){\r\n    var old = typeof window.onclick===\"function\" && window.onclick;\r\n    window.onclick = function(event){\r\n      old && old();\r\n      createHeart(event);\r\n    }\r\n  }\r\n  function createHeart(event){\r\n    var d = document.createElement(\"div\");\r\n    d.className = \"heart\";\r\n    hearts.push({\r\n      el : d,\r\n      x : event.clientX - 5,\r\n      y : event.clientY - 5,\r\n      scale : 1,\r\n      alpha : 1,\r\n      color : randomColor()\r\n    });\r\n    document.body.appendChild(d);\r\n  }\r\n  function css(css){\r\n    var style = document.createElement(\"style\");\r\n    style.type=\"text/css\";\r\n    try{\r\n      style.appendChild(document.createTextNode(css));\r\n    }catch(ex){\r\n      style.styleSheet.cssText = css;\r\n    }\r\n    document.getElementsByTagName('head')[0].appendChild(style);\r\n  }\r\n  function randomColor(){\r\n    return \"rgb(\"+(~~(Math.random()*255))+\",\"+(~~(Math.random()*255))+\",\"+(~~(Math.random()*255))+\")\";\r\n  }\r\n})(window,document);\r\n"],"sourceRoot":""}