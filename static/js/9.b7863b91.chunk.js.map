{"version":3,"sources":["plugins/api.js","page/home/home.js"],"names":["API","ARTICLE_FIND","ARTICLE_DETAILS","BANNER_FIND","CATEGORY_FIND_ALL","Content","Layout","Sider","Search","Input","Option","Select","Home","props","getBanner","self","axios","get","params","parentId","then","data","code","bannerData","result","setState","getArticleList","keyword","category","state","classifyValue","list","total","articleList","articleTotal","getClassify","classifyList","onSearch","value","classifyChange","articleCurrent","this","isShowSlider","isMobileOrPc","articleItem","forEach","item","outline","length","slice","linkTo","_id","push","title","createTime","image","categoryName","className","autoplay","autoplaySpeed","ref","map","index","href","linkUrl","key","src","alt","transitionName","transitionAppear","transitionAppearTimeout","transitionEnterTimeout","transitionLeaveTimeout","to","width","size","placeholder","enterButton","showSearch","defaultValue","onChange","optionFilterProp","filterOption","input","option","children","toLowerCase","indexOf","Component"],"mappings":"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","file":"static/js/9.b7863b91.chunk.js","sourcesContent":["// 后台接口api的链接\r\nexport const API = {\r\n  ARTICLE_FIND: '/blog/article/find', // 条件查询文章列表\r\n  ARTICLE_DETAILS: '/blog/article/details', // 查询文章详情\r\n  BANNER_FIND: '/blog/banner/find', // 查询banner\r\n  CATEGORY_FIND_ALL: '/blog/category/findAll' // 获取全部分类类型\r\n};\r\n\r\nexport default API;\r\n","import './home.scss';\r\nimport React, { Component } from 'react';\r\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport API from \"../../plugins/api\";\r\nimport {\r\n  Avatar,\r\n  Carousel,\r\n  Input,\r\n  Layout,\r\n  Select,\r\n} from 'antd';\r\nimport {isMobileOrPc} from \"../../utils/utils\";\r\n\r\n\r\nconst { Content, Sider } = Layout;\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      articleCurrent: 1,\r\n      articleList: [],\r\n      articleTotal: 0,\r\n      bannerData: [],\r\n      classifyValue: 21,\r\n      classifyList: []\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const self = this;\r\n    self.getBanner(); // 获取banner图\r\n    self.getArticleList(); // 获取文章列表\r\n    self.getClassify(); // 获取分类列表\r\n  }\r\n\r\n  // 查询banner图\r\n  getBanner = ()=> {\r\n    const self = this;\r\n    const params = {\r\n      parentId: 1\r\n    };\r\n    axios.get(API.BANNER_FIND, { params })\r\n      .then(({ data }) =>{\r\n        if (data.code === 0) {\r\n          const bannerData = data.result;\r\n          self.setState({\r\n            bannerData,\r\n          });\r\n        }\r\n      })\r\n  };\r\n  // 获取文章列表\r\n  getArticleList = (keyword)=> {\r\n    const self = this;\r\n    const params = {\r\n      keyword,\r\n      category: self.state.classifyValue\r\n    };\r\n    axios.get(API.ARTICLE_FIND, { params })\r\n      .then(({ data }) =>{\r\n        if (data.code === 0) {\r\n          const { list, total } = data.result;\r\n          self.setState({\r\n            articleList: list,\r\n            articleTotal: total\r\n          });\r\n        }\r\n      })\r\n  };\r\n  // 获取分类列表\r\n  getClassify = ()=> {\r\n    const self = this;\r\n    axios.get(API.CATEGORY_FIND_ALL)\r\n      .then(({ data }) =>{\r\n        self.setState({\r\n          classifyList: data\r\n        });\r\n      })\r\n  };\r\n\r\n  // 搜索\r\n  onSearch = (value)=> {\r\n    const self = this;\r\n    self.getArticleList(value);\r\n  };\r\n\r\n  // 分类选择\r\n  classifyChange = (value)=> {\r\n    const self = this;\r\n    self.setState({\r\n      classifyValue: value\r\n    },() => {\r\n      self.getArticleList();\r\n    });\r\n  };\r\n\r\n\r\n  render() {\r\n    // 检测屏幕\r\n    let isShowSlider = false;\r\n    if (!isMobileOrPc()) {\r\n      isShowSlider = true;\r\n    }\r\n    // 循环文章列表\r\n    let articleItem = [];\r\n    this.state.articleList.forEach((item) =>{\r\n      // 将简介中加入省略号\r\n      const outline = item.outline.length> 100\r\n        ? `${item.outline.slice(0, 100)}...` : item.outline;\r\n      // 处理连接跳转\r\n      // const linkTo = { path :\"/articleDetails\",query: { id: item._id } };\r\n      const linkTo = `/articleDetails?articleId=${item._id}`;\r\n      const image = \"\";\r\n      // 处理循环样式\r\n      articleItem.push({\r\n        title: item.title,\r\n        outline,\r\n        createTime: item.createTime,\r\n        linkTo,\r\n        image,\r\n        category: item.category,\r\n        categoryName: item.categoryName,\r\n      })\r\n    });\r\n    //标签云\r\n    const cloudList = [];\r\n    // 返回页面\r\n    return (\r\n      <Layout className=\"home\">\r\n        <Content className=\"home-main\">\r\n          {/*轮播图*/}\r\n          <div className=\"home-carousel\">\r\n            {/*{bannerList.length>1?<LeftOutlined className=\"home-carousel--prev\" onClick={this.carouselPrev} />:''}*/}\r\n            <Carousel autoplay autoplaySpeed={10000} ref='imgCarousel'>\r\n              {\r\n                this.state.bannerData.map((item, index) =>\r\n                  <a href={item.linkUrl}  title={item.title} key={index}>\r\n                    <img className=\"home-carousel--banner\" src={item.image} alt=\"轮播图\"/>\r\n                  </a>\r\n                )\r\n              }\r\n            </Carousel>\r\n            {/*{bannerList.length>1?<RightOutlined className=\"home-carousel--next\" onClick={this.carouselNext} />:''}*/}\r\n          </div>\r\n          {/*文章列表*/}\r\n          <ul className=\"article\">\r\n            {\r\n              articleItem.map((item, index) =>\r\n                <ReactCSSTransitionGroup\r\n                  key={index}\r\n                  transitionName=\"example\"\r\n                  transitionAppear={true}\r\n                  transitionAppearTimeout={1000}\r\n                  transitionEnterTimeout={1000}\r\n                  transitionLeaveTimeout={1000}\r\n                >\r\n                  <li className=\"article-item\">\r\n                    <div className=\"item-cont\">\r\n                      {item.image?\r\n                        (\r\n                          <div className=\"item-cont--img\">\r\n                            <Link to={item.linkTo} title={item.title}>\r\n                              <img src={item.image} alt={item.title} />\r\n                            </Link>\r\n                          </div>\r\n                        ) : \"\"\r\n                      }\r\n                      <div>\r\n                        <Link to={item.linkTo}>\r\n                          <p className=\"item-cont--title\">\r\n                            {item.title}\r\n                          </p>\r\n                        </Link>\r\n                        <p className=\"item-cont--info\">{item.outline}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"item-author\">\r\n                      <span className=\"lm\">\r\n                        <i className=\"icon-tag2\" />\r\n                        { item.categoryName }\r\n                      </span>\r\n                      <span className=\"time\"><i className=\"icon-time1\" />{ item.createTime }</span>\r\n                      {/*<span className=\"num\">浏览（<a href=\"/\">12</a>）</span>*/}\r\n                      { !isShowSlider ? (\r\n                        ''\r\n                      ): (\r\n                        <span className=\"more\">\r\n                          <Link to={item.linkTo}>阅读原文</Link>\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </li>\r\n                </ReactCSSTransitionGroup>\r\n              )\r\n            }\r\n          </ul>\r\n        </Content>\r\n        {!isShowSlider ? (\r\n          ''\r\n        ) : (\r\n          <Sider width={330} className=\"home-slider\">\r\n            {/*简介*/}\r\n            <div className=\"slider-about\">\r\n              <div className=\"slider-about--avatar\">\r\n                <Avatar size={100} src=\"https://6672-frist-ixdkl-1300617104.tcb.qcloud.la/blog/www/logo.jpg\" />\r\n              </div>\r\n              <p className=\"slider-about--name\">Mr.Yang</p>\r\n              <p className=\"slider-about--position\">Web前端工程师</p>\r\n              <div className=\"slider-about--text\"> 一个90后草根站长！18年入行。一直潜心研究web前端技术，一边工作一边积累经验，分享一些个人工作的经历，以及遇到的问题和解决方法。</div>\r\n            </div>\r\n            {/*搜索*/}\r\n            <div className=\"slider-search\">\r\n              <Search\r\n                placeholder=\"请输入关键字\"\r\n                enterButton=\"搜索\"\r\n                size=\"default\"\r\n                onSearch={this.onSearch}\r\n              />\r\n            </div>\r\n            {/*分类选择*/}\r\n            <div className=\"slider-classify\">\r\n              <Select\r\n                showSearch\r\n                defaultValue={this.state.classifyValue}\r\n                className=\"slider-classify--select\"\r\n                onChange={this.classifyChange}\r\n                optionFilterProp=\"children\"\r\n                filterOption={(input, option) =>\r\n                  option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                }\r\n              >\r\n                {\r\n                  this.state.classifyList.map((item,index) =>\r\n                    <Option value={item.value} key={index}>{item.title}</Option>\r\n                  )\r\n                }\r\n              </Select>\r\n            </div>\r\n            {/*标签云*/}\r\n            {\r\n              cloudList.length>1 ? (\r\n                <div className=\"slider-cloud\">\r\n                  <h2 className=\"slider-cloud--title\">标签云</h2>\r\n                  <ul>\r\n                    {/*<a href=\"/e/tags/?tagname=%B8%F6%C8%CB%B2%A9%BF%CD%C4%A3%B0%E5&amp;tempid=3\" target=\"_blank\">个人博客模板</a>\r\n            <a href=\"/e/tags/?tagname=css%B6%AF%BB%AD&amp;tempid=3\" target=\"_blank\">css动画</a>\r\n            <a href=\"/e/tags/?tagname=%B2%BC%BE%D6&amp;tempid=3\" target=\"_blank\">布局</a>*/}\r\n                    {/*<a href=\"/e/tags/?tagname=%C4%D0%B3%CC%D0%F2%D4%B1&amp;tempid=3\" target=\"_blank\">男程序员</a>*/}\r\n                    {/*<a href=\"/e/tags/?tagname=SEO&amp;tempid=3\" target=\"_blank\">SEO</a>\r\n            <a href=\"/e/tags/?tagname=%C5%AE%B3%CC%D0%F2%D4%B1&amp;tempid=3\" target=\"_blank\">女程序员</a>\r\n            <a href=\"/e/tags/?tagname=%D0%A1%CA%C0%BD%E7&amp;tempid=3\" target=\"_blank\">小世界</a>\r\n            <a href=\"/e/tags/?tagname=%B8%F6%C8%CB%B2%A9%BF%CD&amp;tempid=3\" target=\"_blank\">个人博客</a>\r\n            <a href=\"/e/tags/?tagname=%C9%E8%BC%C6&amp;tempid=3\" target=\"_blank\">设计</a>*/}\r\n                  </ul>\r\n                </div>\r\n              ) : ''\r\n            }\r\n\r\n          </Sider>\r\n        )}\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n"],"sourceRoot":""}